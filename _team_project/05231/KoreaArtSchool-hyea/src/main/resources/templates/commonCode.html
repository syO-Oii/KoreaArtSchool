<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>코드 관리</title>
</head>
<body>
<h1>공통코드관리</h1>
<table border="1">
    <thead>
    <tr>
        <th>코드</th>
        <th>상세 코드</th>
        <th>코드 이름</th>
        <th>설명</th>
        <th>활성화 여부</th>
        <th>생성일</th>
        <th>액션</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="commCd : ${codeList}">
        <td contenteditable="true" th:text="${commCd.cd}">코드</td>
        <td contenteditable="true" th:text="${commCd.cdSe}">상세 코드</td>
        <td contenteditable="true" th:text="${commCd.cdNm}">코드 이름</td>
        <td contenteditable="true" th:text="${commCd.cdDesc}">설명</td>
        <td contenteditable="true" th:text="${commCd.isYn}">활성화 여부</td>
        <td contenteditable="true" th:text="${#dates.format(commCd.createdAt, 'yyyy-MM-dd')}">생성일</td>
        <td>
            <button onclick="updateData(this)">수정</button>
            <a th:href="@{/delete/{cdId}(cdId=${commCd.cdId})}">삭제</a>
        </td>
    </tr>
    </tbody>
</table>

<!-- 코드 추가 폼 -->
<h2>코드 추가</h2>
<form id="addForm" action="/admin/common-code/add" method="post">
    <label>코드</label>
    <input type="text" name="cd" required>
    <label>상세 코드</label>
    <input type="text" name="cdSe" required>
    <label>코드 이름</label>
    <input type="text" name="cdNm" required>
    <label>설명</label>
    <input type="text" name="cdDesc">
    <label>활성화 여부</label>
    <input type="text" name="isYn" required>
    <button type="submit">추가</button>
</form>

<script>
    function updateData(element) {
        var row = element.parentNode.parentNode;
        var cells = row.getElementsByTagName('td');
        var data = {};
        for (var i = 0; i < cells.length - 1; i++) {
            data['field_' + i] = cells[i].innerText;
        }
        // AJAX를 사용하여 데이터 업데이트 요청을 보냅니다.
        // 예시: fetch 또는 XMLHttpRequest를 사용하여 서버에 데이터 전송
    }
</script>
</body>
</html>